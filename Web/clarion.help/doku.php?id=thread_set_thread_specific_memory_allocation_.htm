<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>thread_set_thread_specific_memory_allocation_.htm [Clarion Community Help]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="thread_set_thread_specific_memory_allocation_.htm"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Clarion Community Help"/>
<link rel="start" href="/"/>
<link rel="contents" href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=index" title="Sitemap"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/feed.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/doku.php?do=export_xhtml&amp;id=thread_set_thread_specific_memory_allocation_.htm"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/doku.php?do=export_raw&amp;id=thread_set_thread_specific_memory_allocation_.htm"/>
<link rel="canonical" href="http://clarion.help/doku.php?id=thread_set_thread_specific_memory_allocation_.htm"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=dokuwiki&amp;tseed=6c87f37cf2e26d7e09fa69b644b48db6"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"thread_set_thread_specific_memory_allocation_.htm","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=dokuwiki&amp;tseed=6c87f37cf2e26d7e09fa69b644b48db6"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="/lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="/doku.php?id=start"  accesskey="h" title="[H]"><img src="/lib/exe/fetch.php?media=logo.png" width="354" height="103" alt="" /> <span>Clarion Community Help</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action login"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=login&amp;sectok=" title="Log In" rel="nofollow"><span>Log In</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10 17.25V14H3v-4h7V6.75L15.25 12 10 17.25M8 2h9a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-4h2v4h9V4H8v4H6V4a2 2 0 0 1 2-2z"/></svg></a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/doku.php?id=start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="thread_set_thread_specific_memory_allocation_.htm" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="thread_set_thread_specific_memory_allocation_.htm" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent Changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Log In</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=recent" title="Recent Changes [r]" rel="nofollow" accesskey="r">Recent Changes</a></li><li class="action media"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=media&amp;ns=" title="Media Manager" rel="nofollow">Media Manager</a></li><li class="action index"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=index" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=order_set_view_sort_order_expression_.htm"  class="breadcrumbs" title="order_set_view_sort_order_expression_.htm">order_set_view_sort_order_expression_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=over_set_shared_memory_location_.htm"  class="breadcrumbs" title="over_set_shared_memory_location_.htm">over_set_shared_memory_location_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=owner_declare_password_for_data_encryption_.htm"  class="breadcrumbs" title="owner_declare_password_for_data_encryption_.htm">owner_declare_password_for_data_encryption_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=pre_set_label_prefix_.htm"  class="breadcrumbs" title="pre_set_label_prefix_.htm">pre_set_label_prefix_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=primary_set_relational_primary_key_.htm"  class="breadcrumbs" title="primary_set_relational_primary_key_.htm">primary_set_relational_primary_key_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=private_set_variable_private_to_a_class_module_.htm"  class="breadcrumbs" title="private_set_variable_private_to_a_class_module_.htm">private_set_variable_private_to_a_class_module_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=protected_set_variable_private_to_a_class_or_derived_class_.htm"  class="breadcrumbs" title="protected_set_variable_private_to_a_class_or_derived_class_.htm">protected_set_variable_private_to_a_class_or_derived_class_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=reclaim_reuse_deleted_record_space_.htm"  class="breadcrumbs" title="reclaim_reuse_deleted_record_space_.htm">reclaim_reuse_deleted_record_space_.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=static_set_allocate_static_memory_.htm"  class="breadcrumbs" title="static_set_allocate_static_memory_.htm">static_set_allocate_static_memory_.htm</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm"  class="breadcrumbs" title="thread_set_thread_specific_memory_allocation_.htm">thread_set_thread_specific_memory_allocation_.htm</a></bdi></span></div>
                    </div>
    


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>thread_set_thread_specific_memory_allocation_.htm</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>Navigation:</strong>  <a href="/doku.php?id=introduction.htm" class="wikilink1" title="introduction.htm">Language Reference</a> &gt; 5 - Declaration Attributes &gt; Variable and Entity Attributes &gt;====== THREAD (set thread-specific memory allocation) ====== </td><td class="col1"> <a href="/doku.php?id=static_set_allocate_static_memory_.htm" class="media" title="static_set_allocate_static_memory_.htm"><img src="/lib/exe/fetch.php?media=btn_prev_n.gif" class="media" title="Previous page" alt="Previous page" /></a><a href="/doku.php?id=introduction.htm" class="media" title="introduction.htm"><img src="/lib/exe/fetch.php?media=btn_home_n.gif" class="media" title="Return to chapter overview" alt="Return to chapter overview" /></a><a href="/doku.php?id=type_type_definition_.htm" class="media" title="type_type_definition_.htm"><img src="/lib/exe/fetch.php?media=btn_next_n.gif" class="media" title="Next page" alt="Next page" /></a> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign" colspan="2">  </td>
	</tr>
</table></div>

<p>
<strong>THREAD</strong>
</p>

<p>
<a href="/lib/exe/detail.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;media=blk2blue.jpg" class="media" title="blk2blue.jpg"><img src="/lib/exe/fetch.php?media=blk2blue.jpg" class="media" title="blk2blue.jpg" alt="blk2blue.jpg" /></a>
</p>

<p>
The <strong>THREAD</strong> attribute declares a variable, FILE, GROUP, QUEUE, or CLASS which is allocated memory separately for each execution thread in the program. This makes the values dependent upon which thread is executing.
</p>

<p>
A threaded variable must be allocated static memory, so Local data with the THREAD attribute is automatically considered STATIC. This attribute creates runtime “overhead,” particularly on Global or Module data. Therefore, it should be used only when necessary.
</p>

<p>
In multi-DLL applications, if the THREAD attribute is declared on any of the above valid types, any reference to these types in an associated executable or another DLL must also include the THREAD attribute.
</p>

<p>
<strong>Variable and GROUP Usage</strong>
</p>

<p>
The THREAD attribute declares a static variable which is allocated memory separately for each execution thread in the program. This makes the value contained in the variable dependent upon which thread is executing. Whenever a new execution thread is begun, a new instance of the variable, specific to that thread, is created and initialized to blank or zero (unless the AUTO attribute is also present).
</p>

<p>
<strong>FILE Usage</strong>
</p>

<p>
The THREAD attribute (PROP:THREAD–valid only for a FILE) on a FILE declaration allocates memory for its record buffer, file control block, and other file structure elements separately for each execution thread as each thread is started. This makes the values contained in the record buffer and other file elements dependent upon which thread is executing. Memory for its record buffer,file control block, and other file elements is deallocated when the thread is closed.
</p>

<p>
Instances of a threaded FILE are considered independent FILEs. Therefore, a FILE must be OPENed and CLOSEd for each new instance.
</p>

<p>
<strong>QUEUE Usage</strong>
</p>

<p>
The THREAD attribute on a QUEUE declaration declares a static QUEUE data buffer which is allocated memory separately for each execution thread in the program. This makes the values contained in the QUEUE dependent upon which thread is executing. Whenever a new execution thread is begun, a new instance of the QUEUE, specific to that thread, is created.
</p>

<p>
<strong>Example:</strong>
</p>

<p>
<strong>  PROGRAM</strong>
</p>

<p>
<strong>  MAP</strong>
</p>

<p>
<strong>Thread1   PROCEDURE</strong>
</p>

<p>
<strong>Thread2   PROCEDURE</strong>
</p>

<p>
<strong>  END</strong>
</p>

<p>
<strong>Names   FILE,DRIVER(&#039;Clarion&#039;),PRE(Nam),</strong><strong>THREAD</strong><strong>  !Threaded file</strong>
</p>

<p>
<strong>NbrNdx   INDEX(Nam:Number),OPT</strong>
</p>

<p>
<strong>Rec      RECORD</strong>
</p>

<p>
<strong>Name      STRING(20)</strong>
</p>

<p>
<strong>Number    SHORT</strong>
</p>

<p>
<strong>         END</strong>
</p>

<p>
<strong>        END</strong>
</p>

<p>
<strong>GlobalVar LONG,</strong><strong>THREAD</strong><strong>     !Each execution thread gets its own copy OF GlobalVar</strong>
</p>

<p>
<strong>  CODE</strong>
</p>

<p>
<strong>  START(Thread1)</strong>
</p>

<p>
<strong>  START(Thread2)</strong>
</p>

<p>
<strong>Thread1  PROCEDURE</strong>
</p>

<p>
<strong>LocalVar LONG,</strong><strong>THREAD</strong><strong>      !Local threaded variable (automatically STATIC)</strong>
</p>

<p>
<strong>  CODE</strong>
</p>

<p>
<strong>  OPEN(Names)             !OPEN creates new record buffer instance</strong>
</p>

<p>
<strong>  SET(Names)              !containing the first record in the file</strong>
</p>

<p>
<strong>  NEXT(Names)</strong>
</p>

<p>
<strong>Thread2   PROCEDURE</strong>
</p>

<p>
<strong>SaveQueue QUEUE,</strong><strong>THREAD</strong><strong>    !Static QUEUE data buffer Thread-specific QUEUE</strong>
</p>

<p>
<strong>Name       STRING(20)</strong>
</p>

<p>
<strong>Number     SHORT</strong>
</p>

<p>
<strong>          END</strong>
</p>

<p>
<strong>  CODE</strong>
</p>

<p>
<strong>  OPEN(Names)             !OPEN creates another new record buffer instance</strong>
</p>

<p>
<strong>  SET(Names)              !containing the last record in the file</strong>
</p>

<p>
<strong>  PREVIOUS(Names)</strong>
</p>

<p>
<strong>See Also:</strong>
</p>

<p>
<a href="/doku.php?id=start_return_new_execution_thread_.htm" class="wikilink1" title="start_return_new_execution_thread_.htm">START</a>
</p>

<p>
<a href="/doku.php?id=data_declarations_and_memory_allocation.htm" class="wikilink1" title="data_declarations_and_memory_allocation.htm">Data Declarations and Memory Allocation</a>
</p>

<p>
<a href="/doku.php?id=static_set_allocate_static_memory_.htm" class="wikilink1" title="static_set_allocate_static_memory_.htm">STATIC</a>
</p>

<p>
<a href="/doku.php?id=auto_uninitialized_local_variable_.htm" class="wikilink1" title="auto_uninitialized_local_variable_.htm">AUTO</a>
</p>

<p>
<a href="/doku.php?id=mtcode_differences_between_clarion_5_5_and_clarion_6.htm" class="wikilink1" title="mtcode_differences_between_clarion_5_5_and_clarion_6.htm">Thread Design Considerations</a>
</p>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>thread_set_thread_specific_memory_allocation_.htm.txt</bdi> · Last modified: 2021/04/15 15:57 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="source"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=edit" title="Show pagesource [v]" rel="nofollow" accesskey="v"><span>Show pagesource</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41-3.74 3.74m11.16 0l-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41 3.74-3.74z"/></svg></a></li><li class="revs"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=revisions" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="/doku.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;do=backlink" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" class="urlextern">CC Attribution-Share Alike 4.0 International</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img src="/lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 4.0 International" /></a>        <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="/lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net" title="Powered by PHP" ><img
            src="/lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="//validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="/lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="//jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="/lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="/lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="/lib/exe/indexer.php?id=thread_set_thread_specific_memory_allocation_.htm&amp;1631826500" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
