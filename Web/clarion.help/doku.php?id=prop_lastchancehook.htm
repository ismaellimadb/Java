<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>prop_lastchancehook.htm [Clarion Community Help]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="prop_lastchancehook.htm"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="Clarion Community Help"/>
<link rel="start" href="/"/>
<link rel="contents" href="/doku.php?id=prop_lastchancehook.htm&amp;do=index" title="Sitemap"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/feed.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/doku.php?do=export_xhtml&amp;id=prop_lastchancehook.htm"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/doku.php?do=export_raw&amp;id=prop_lastchancehook.htm"/>
<link rel="canonical" href="http://clarion.help/doku.php?id=prop_lastchancehook.htm"/>
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=dokuwiki&amp;tseed=6c87f37cf2e26d7e09fa69b644b48db6"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"prop_lastchancehook.htm","namespace":"","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=dokuwiki&amp;tseed=6c87f37cf2e26d7e09fa69b644b48db6"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="/lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="/lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="/doku.php?id=start"  accesskey="h" title="[H]"><img src="/lib/exe/fetch.php?media=logo.png" width="354" height="103" alt="" /> <span>Clarion Community Help</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action login"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=login&amp;sectok=" title="Log In" rel="nofollow"><span>Log In</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10 17.25V14H3v-4h7V6.75L15.25 12 10 17.25M8 2h9a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-4h2v4h9V4H8v4H6V4a2 2 0 0 1 2-2z"/></svg></a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/doku.php?id=start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="prop_lastchancehook.htm" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="prop_lastchancehook.htm" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent Changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Log In</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=recent" title="Recent Changes [r]" rel="nofollow" accesskey="r">Recent Changes</a></li><li class="action media"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=media&amp;ns=" title="Media Manager" rel="nofollow">Media Manager</a></li><li class="action index"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=index" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_iconlist.htm"  class="breadcrumbs" title="prop_iconlist.htm">prop_iconlist.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_imagebits.htm"  class="breadcrumbs" title="prop_imagebits.htm">prop_imagebits.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_imageblob.htm"  class="breadcrumbs" title="prop_imageblob.htm">prop_imageblob.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_imageinstance.htm"  class="breadcrumbs" title="prop_imageinstance.htm">prop_imageinstance.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_initastringhook.htm"  class="breadcrumbs" title="prop_initastringhook.htm">prop_initastringhook.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_interface.htm"  class="breadcrumbs" title="prop_interface.htm">prop_interface.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_intoolbar.htm"  class="breadcrumbs" title="prop_intoolbar.htm">prop_intoolbar.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_iprequestcount.htm"  class="breadcrumbs" title="prop_iprequestcount.htm">prop_iprequestcount.htm</a></bdi> <span class="bcsep">•</span> <bdi><a href="/doku.php?id=prop_items.htm"  class="breadcrumbs" title="prop_items.htm">prop_items.htm</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="/doku.php?id=prop_lastchancehook.htm"  class="breadcrumbs" title="prop_lastchancehook.htm">prop_lastchancehook.htm</a></bdi></span></div>
                    </div>
    


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>prop_lastchancehook.htm</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>Navigation:</strong>  <a href="/doku.php?id=introduction.htm" class="wikilink1" title="introduction.htm">Language Reference</a> &gt; <a href="/doku.php?id=chapter_runtime_properties.htm" class="wikilink1" title="chapter_runtime_properties.htm">App C - PROP: Runtime Properties</a> &gt; Complete Property List &gt;====== PROP:LastChanceHook ====== </td><td class="col1"> <a href="/doku.php?id=prop_items.htm" class="media" title="prop_items.htm"><img src="/lib/exe/fetch.php?media=btn_prev_n.gif" class="media" title="Previous page" alt="Previous page" /></a><a href="/doku.php?id=chapter_runtime_properties.htm" class="media" title="chapter_runtime_properties.htm"><img src="/lib/exe/fetch.php?media=btn_home_n.gif" class="media" title="Return to chapter overview" alt="Return to chapter overview" /></a><a href="/doku.php?id=prop_left.htm" class="media" title="prop_left.htm"><img src="/lib/exe/fetch.php?media=btn_next_n.gif" class="media" title="Next page" alt="Next page" /></a> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign" colspan="2">  </td>
	</tr>
</table></div>

<p>
This is a SYSTEM read/write property (returning a LONG) that allows you to specify your own function that will be invoked if an exception has occurred. The hook function allows you to display information about the exception and choose one of the following actions:
</p>

<p>
·Continue execution of the thread where the exception occurred (unless the exception is fatal).
</p>

<p>
·Stop the thread (or the entire process if the exception occurred in the main process thread) without invoking the RTL&#039;s (runtime library) internal exception handler.
</p>

<p>
·Invoke the RTL&#039;s internal exception handler.
</p>

<p>
This allows you to catch an exception, and if it is non-fatal you can allow your end users to continue executing your program even when an exception has occurred in one of its threads.
</p>

<p>
The RTL handler shows information about the exception and asks for one of the following actions:
</p>

<p>
·Stop the thread where the exception occurred.
</p>

<p>
·Stop the entire process.
</p>

<p>
·Invoke the system debugger
</p>

<p>
·Generate a debug event if the program is already running under the debugger.
</p>

<p>
The action is dependent on the thread with the exception, whether the program is running under the debugger, etc.
</p>

<p>
PROP:LastChanceHook also allows the developer to set the exit code (error level) returned by the program to the <abbr title="Operating System">OS</abbr> on its termination, without the need to terminate the program immediately as is done when using the HALT statement.
</p>

<p>
<strong>Implementation:</strong>
</p>

<p>
Your function, which you assign to the SYSTEM{PROP:LastChanceHook} property must use the following prototype:
</p>

<p>
<strong>HookProc (*ICWExceptionInfo),LONG</strong>
</p>

<p>
The <em>ICWExceptionInfo</em> Parameter is an interface declared in CWEXCPT.INT, which is found in your LIBSRC folder.
</p>

<p>
The result returned by the hooked function is evaluated as follows:
</p>

<p>
·If the result is equal to 0, the RTL executes its own internal exception handler dialog to show information about the exception and subsequently perform the action chosen by the end user.
</p>

<p>
·If a positive number is returned, the RTL stops the thread (or the entire process if the exception occurred in the main process thread) <em>without</em> invoking the RTL exception handler
</p>

<p>
·If a negative number is returned, the program will try to continue from the point of the exception. Note, if the exception is fatal, this result is ignored and treated as equal to zero (0).
</p>

<p>
<strong>Example:</strong>
</p>
<div class="table sectionedit2"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong> PROGRAM</strong> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong> INCLUDE(&#039;CWEXCPT.INT&#039;),ONCE</strong> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong> MAP</strong> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong>  Test (LONG,LONG)</strong> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>  Hook (*ICWExceptionInfo),LONG</strong> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>  HEX (LONG),STRING,PRIVATE</strong> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>  MODULE(“)</strong> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>   MessageBox (UNSIGNED, CONST *CSTRING, CONST *CSTRING, UNSIGNED)|</strong><strong>               ,SIGNED,PROC,PASCAL,NAME(&#039;MessageBoxA&#039;)</strong> </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>  END</strong> </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <strong> END</strong> </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <strong><abbr title="Megabyte">MB</abbr>_ICONHAND EQUATE(00000010h)</strong> </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <strong>CODE</strong> </td>
	</tr>
	<tr class="row16">
		<td class="col0"> <strong>SYSTEM{PROP:LastChanceHook} = ADDRESS(Hook)</strong> </td>
	</tr>
	<tr class="row17">
		<td class="col0"> <strong>Test (10, 0)  !intentionally causes an exception</strong> </td>
	</tr>
	<tr class="row18">
		<td class="col0"> <strong>RETURN</strong> </td>
	</tr>
</table></div>

<p>
In this example the procedure named <em>Hook</em> is assigned as our exception handler. That&#039;s the only procedure we are concerned with, the others are just there to help to make the example work by 1) causing an exception and 2) informing the user about the exception.
</p>

<p>
Next we have:
</p>
<div class="table sectionedit3"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong>Hook PROCEDURE(*ICWExceptionInfo info)</strong> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong>S        CSTRING(1024)</strong> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>Caption  CSTRING(256)</strong> </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong> CODE</strong> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>  IF info &amp;amp;= NULL</strong> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>   RETURN 0</strong> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>  END</strong> </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <strong>  Caption = &#039;Exception &#039; &amp;amp; HEX (info.ExceptionCode()) &amp;amp; &#039; at &#039; &amp;amp; HEX (info.ExceptionAddress())</strong> </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong>  S = &#039;Registers&#039; &amp;amp; |</strong> </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <strong> &#039;&lt;;13,10&gt;EAX=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_EAX)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row14">
		<td class="col0"> <strong> &#039; EBX=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_EBX)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <strong> &#039; ECX=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_ECX)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row16">
		<td class="col0"> <strong> &#039; EDX=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_EDX)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row17">
		<td class="col0"> <strong> &#039;&lt;;13,10&gt;ESI=</strong> &#039;<strong> &amp;amp; HEX (info.Register (i386_Register:Reg32_ESI)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row18">
		<td class="col0"> <strong> &#039; EDI=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_EDI)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row19">
		<td class="col0"> <strong> &#039; ESP=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_ESP)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row20">
		<td class="col0"> <strong> &#039; EBP=</strong> <strong>&#039; &amp;amp; HEX (info.Register (i386_Register:Reg32_EBP)) &amp;amp; |</strong> </td>
	</tr>
	<tr class="row21">
		<td class="col0"> <strong> &#039;&lt;;13,10,13,10&gt;Current thread is being terminated</strong> <strong>&#039;</strong> </td>
	</tr>
	<tr class="row22">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row23">
		<td class="col0"> <strong> MessageBox (0, S, Caption, <abbr title="Megabyte">MB</abbr>_ICONHAND)</strong> </td>
	</tr>
	<tr class="row24">
		<td class="col0"> <strong> RETURN 1      !a positive value signals the RTL to kill the thread</strong> </td>
	</tr>
	<tr class="row25">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row26">
		<td class="col0"> <strong>! </strong><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong>* </td>
	</tr>
	<tr class="row27">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row28">
		<td class="col0"> <strong>Test PROCEDURE (LONG a, LONG b)</strong> </td>
	</tr>
	<tr class="row29">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row30">
		<td class="col0"> <strong> CODE</strong> </td>
	</tr>
	<tr class="row31">
		<td class="col0"> <strong>  a %= b</strong> </td>
	</tr>
	<tr class="row32">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row33">
		<td class="col0"> <strong>! </strong><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><strong></strong>* </td>
	</tr>
	<tr class="row34">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row35">
		<td class="col0"> <strong>HEX PROCEDURE (LONG A)</strong> </td>
	</tr>
	<tr class="row36">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row37">
		<td class="col0"> <strong>i       UNSIGNED,AUTO</strong> </td>
	</tr>
	<tr class="row38">
		<td class="col0"> <strong>S       STRING(8),AUTO</strong> </td>
	</tr>
	<tr class="row39">
		<td class="col0"> <strong>DIGITS  STRING(&#039;0123456789ABCDEF&#039;),STATIC</strong> </td>
	</tr>
	<tr class="row40">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row41">
		<td class="col0"> <strong>  CODE</strong> </td>
	</tr>
	<tr class="row42">
		<td class="col0"> <strong>   i = SIZE(S)</strong> </td>
	</tr>
	<tr class="row43">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row44">
		<td class="col0"> <strong>   LOOP WHILE i &lt;;&gt; 0</strong> </td>
	</tr>
	<tr class="row45">
		<td class="col0"> <strong>    S [i] = DIGITS [BAND (A, 0Fh) + 1]</strong> </td>
	</tr>
	<tr class="row46">
		<td class="col0"> <strong>    A = BSHIFT (A, -4)</strong> </td>
	</tr>
	<tr class="row47">
		<td class="col0"> <strong>    i -= 1</strong> </td>
	</tr>
	<tr class="row48">
		<td class="col0"> <strong>   END</strong> </td>
	</tr>
	<tr class="row49">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row50">
		<td class="col0"> <strong>   RETURN S</strong> </td>
	</tr>
	<tr class="row51">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row52">
		<td class="col0 leftalign">  </td>
	</tr>
</table></div>

<p>
These first two lines of code assign our exception handler function and then call the Test procedure that raises an exception:
</p>

<p>
<strong>SYSTEM{PROP:LastChanceHook} = ADDRESS (Hook)</strong>
</p>

<p>
<strong>Test (10, 0) ! causes an exception</strong>
</p>

<p>
The exception is trapped and we show the result in a MessageBox.
</p>

<p>
Our Hook PROCEDURE (*ICWExceptionInfo info) uses the methods in the interface to show the exception code, its address, and the values of the registers at the time of the exception.
</p>

<p>
In our example our Hook PROCEDURE executes a <strong>RETURN 1</strong> and since we are running on the main thread, then immediately after the MessageBox is displayed and the user presses the OK button the program itself is terminated.
</p>

<p>
<strong>Conceptual Example:</strong>
</p>
<div class="table sectionedit4"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>PROGRAM</strong> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong>  INCLUDE(&#039;CWEXCPT.INT&#039;),ONCE</strong> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>  MAP</strong> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong>    MyHandler(*ICWExceptionInfo),LONG</strong> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>    BadCode()</strong> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>    MODULE(&#039;&#039;)</strong> </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>      SLEEP(LONG),PASCAL</strong> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>    END</strong> </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>  END</strong> </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong>badPtr      &amp;amp;LONG</strong> </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <strong>temp        LONG</strong> </td>
	</tr>
	<tr class="row14">
		<td class="col0"> <strong>oldHandler  LONG</strong> </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <strong>continue    BOOL(FALSE)</strong> </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row17">
		<td class="col0"> <strong> CODE</strong> </td>
	</tr>
	<tr class="row18">
		<td class="col0"> <strong>  RESUME(START(BadCode))</strong> </td>
	</tr>
	<tr class="row19">
		<td class="col0"> <strong>  LOOP WHILE NOT continue</strong> </td>
	</tr>
	<tr class="row20">
		<td class="col0"> <strong>    SLEEP(100)</strong> </td>
	</tr>
	<tr class="row21">
		<td class="col0"> <strong>  END</strong> </td>
	</tr>
	<tr class="row22">
		<td class="col0"> <strong>  badPtr &amp;amp;= NULL</strong> </td>
	</tr>
	<tr class="row23">
		<td class="col0"> <strong>  badPtr = 0</strong> </td>
	</tr>
	<tr class="row24">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row25">
		<td class="col0"> <strong>BadCode     PROCEDURE()</strong> </td>
	</tr>
	<tr class="row26">
		<td class="col0"> <strong>  CODE</strong> </td>
	</tr>
	<tr class="row27">
		<td class="col0"> <strong>  oldHandler = SYSTEM{PROP:LastChanceHook}        !Read address of oldhandler</strong> </td>
	</tr>
	<tr class="row28">
		<td class="col0"> <strong>  SYSTEM{PROP:LastChanceHook} = ADDRESS(MyHandler)!Call new handler</strong> </td>
	</tr>
	<tr class="row29">
		<td class="col0"> <strong>  badPtr = 0</strong> </td>
	</tr>
	<tr class="row30">
		<td class="col0"> <strong>  </strong> </td>
	</tr>
	<tr class="row31">
		<td class="col0 leftalign">  </td>
	</tr>
	<tr class="row32">
		<td class="col0"> <strong>MyHandler   PROCEDURE(*ICWExceptionInfo info)</strong> </td>
	</tr>
	<tr class="row33">
		<td class="col0"> <strong>  CODE</strong> </td>
	</tr>
	<tr class="row34">
		<td class="col0"> <strong>  SYSTEM{PROP:LastChanceHook} = oldHandler</strong> </td>
	</tr>
	<tr class="row35">
		<td class="col0"> <strong>  MESSAGE(&#039;Someone did something naughty&#039;)</strong> </td>
	</tr>
	<tr class="row36">
		<td class="col0"> <strong>  continue = TRUE</strong> </td>
	</tr>
	<tr class="row37">
		<td class="col0"> <strong>  RETURN 1</strong> </td>
	</tr>
</table></div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>prop_lastchancehook.htm.txt</bdi> · Last modified: 2021/04/15 15:57 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="source"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=edit" title="Show pagesource [v]" rel="nofollow" accesskey="v"><span>Show pagesource</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41-3.74 3.74m11.16 0l-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41 3.74-3.74z"/></svg></a></li><li class="revs"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=revisions" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="/doku.php?id=prop_lastchancehook.htm&amp;do=backlink" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" class="urlextern">CC Attribution-Share Alike 4.0 International</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img src="/lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 4.0 International" /></a>        <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="/lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net" title="Powered by PHP" ><img
            src="/lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="//validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="/lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="//jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="/lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="/lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="/lib/exe/indexer.php?id=prop_lastchancehook.htm&amp;1631827562" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
